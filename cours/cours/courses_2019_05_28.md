## Cours 28 mai 2019


### Trigger de validation

```sql
DELIMITER ;;
CREATE TRIGGER `insert_client_nom_requis`
	BEFORE INSERT ON `client` FOR EACH ROW
  BEGIN

	IF NEW.`nom` is null or NEW.`nom`='' THEN
		SIGNAL SQLSTATE VALUE '45000'
			SET MESSAGE_TEXT = 'Le nom est obligatoire';
	END IF;

	IF NEW.`prenom` is null or NEW.`prenom`='' THEN
		SIGNAL SQLSTATE VALUE '45000'
			SET MESSAGE_TEXT = 'Le prenom est obligatoire';
	END IF;

	IF NEW.`genre` is null or NEW.`genre`='' THEN
		SIGNAL SQLSTATE VALUE '45000'
			SET MESSAGE_TEXT = 'Le genre est obligatoire';
	END IF;

    IF NEW.`date_de_naissance` is null or NEW.`date_de_naissance`='' THEN
		SIGNAL SQLSTATE VALUE '45000'
			SET MESSAGE_TEXT = 'La date de naissance est obligatoire';
	END IF;

	IF NEW.`email` is null or NEW.`email`='' THEN
		SIGNAL SQLSTATE VALUE '45000'
			SET MESSAGE_TEXT = 'L\'email est obligatoire';
	END IF;

     IF NEW.`telephone` is null or NEW.`telephone`='' THEN
		SIGNAL SQLSTATE VALUE '45000'
			SET MESSAGE_TEXT = 'Le téléphone est obligatoire';
	END IF;

END ;;
DELIMITER ;
``
